angular.module("giftSwitch",["appRoutes","mainCtrl","wishlistService","exchangeService","ng-sortable","moment-picker"]),angular.module("appRoutes",["ngRoute"]).config(["$routeProvider","$locationProvider",function(e,n){e.when("/",{templateUrl:"app/views/pages/home.html"}).when("/recipient",{templateUrl:"app/views/pages/recipient.html",controller:"recipientController",controllerAs:"recipient"}).when("/settings",{templateUrl:"app/views/pages/settings.html",controller:"settingsController",controllerAs:"settings"}).when("/login",{templateUrl:"app/views/pages/login.html",controller:"mainController",controllerAs:"login"}),n.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("mainCtrl",["wishlistService","exchangeService","ng-sortable","moment-picker"]).controller("mainController",["$window","$scope","$location","Wishlist","Exchange",function(e,n,t,i,o){var r=this;r.loggedIn=!1,"/login"!==t.path()&&(r.loggedIn=!0,i.owner().success(function(e){r.owner=e}),i.all().success(function(e){r.wishlist=e}),o.all().success(function(e){r.exchanges=e})),r.addItem=function(){i.add(r.userData).success(function(e){r.userData={},i.all().success(function(e){r.wishlist=e})})},r.updateItem=function(e,n){var t={};t.description=document.getElementsByName("newDescription")[n].value,t.url=document.getElementsByName("newUrl")[n].value,i.update(e,t).success(function(e){r.wishlist[n]=e})},r.removeItem=function(e){i.remove(e).success(function(e){i.all().success(function(e){r.wishlist=e})})},r.addExchange=function(){o.add(r.userData).success(function(e){n.dismiss(),n.reset(),o.all().success(function(e){r.exchanges=e})})},r.isActive=function(e){return e===t.path()},r.googleLogin=function(){e.location.href="/auth/google"},r.logOut=function(){e.location.href="/logout"}}]).directive("exchangeModal",function(){return{restrict:"A",link:function(e,n,t){e.dismiss=function(){n.modal("hide")},e.reset=function(){n.on("hidden.bs.modal",function(){$(this).find("form")[0].reset()})}}}}),angular.module("exchangeService",[]).factory("Exchange",["$http",function(e){var n={};return n.all=function(){return e.get("/api/exchange")},n.add=function(n){return e.post("/api/exchange",n)},n.update=function(n,t){return e.put("/api/exchange/"+n,t)},n["delete"]=function(n){return e["delete"]("/api/exchange/"+n)},n}]),angular.module("wishlistService",[]).factory("Wishlist",["$http",function(e){var n={};return n.owner=function(){return e.get("/api/me")},n.all=function(){return e.get("/api/wishlist")},n.add=function(n){return e.post("/api/wishlist",n)},n.update=function(n,t){return e.put("/api/wishlist/"+n,t)},n.remove=function(n){return e["delete"]("/api/wishlist/"+n)},n}]);
angular.module("giftSwitch",["appRoutes","mainCtrl","exchangeCtrl","addExchangeModalCtrl","wishlistService","exchangeService","ng-sortable","moment-picker","angularModalService"]),angular.module("appRoutes",["ngRoute"]).config(["$routeProvider","$locationProvider",function(e,n){e.when("/",{templateUrl:"app/views/pages/home.html"}).when("/recipient",{templateUrl:"app/views/pages/recipient.html",controller:"recipientController",controllerAs:"recipient"}).when("/settings",{templateUrl:"app/views/pages/settings.html",controller:"settingsController",controllerAs:"settings"}).when("/exchange",{templateUrl:"app/views/pages/exchange.html",controller:"exchangeController",controllerAs:"exchange"}).when("/login",{templateUrl:"app/views/pages/login.html",controller:"mainController",controllerAs:"login"}),n.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("addExchangeModalCtrl",["exchangeService","moment-picker"]).controller("addExchangeModalController",["$scope","$element","Exchange","close",function(e,n,t,a){e.cancel=function(){n.modal("hide"),a(null,500)},e.addExchange=function(){t.add(e.userData).success(function(e){t.all().success(function(e){a({exchanges:e},500)})})}}]),angular.module("exchangeCtrl",["exchangeService","wishlistService","angularModalService"]).controller("exchangeController",["$scope","$location","Exchange","Wishlist","ModalService",function(e,n,t,a,c){}]),angular.module("mainCtrl",["wishlistService","exchangeService","angularModalService","ng-sortable"]).controller("mainController",["$window","$location","$scope","Wishlist","Exchange","ModalService",function(e,n,t,a,c,l){var r=this;r.loggedIn=!1,"/login"!==n.path()&&(r.loggedIn=!0,a.owner().success(function(e){r.owner=e})),r.addItem=function(){a.add(r.currentExchange,r.userData).success(function(e){r.userData={},a.all(r.currentExchange).success(function(e){r.wishlist=e})})},r.updateItem=function(e,n){var t={};t.description=document.getElementsByName("newDescription")[n].value,t.url=document.getElementsByName("newUrl")[n].value,a.update(r.currentExchange,e,t).success(function(e){r.wishlist[n]=e})},r.removeItem=function(e){a.remove(r.currentExchange,e).success(function(e){a.all(r.currentExchange).success(function(e){r.wishlist=e})})},c.all().success(function(e){r.exchanges=e,r.exchanges[0]?(t.main.currentExchange=r.exchanges[0].id,t.main.currentExchangeName=r.exchanges[0].name):t.main.currentExchange=null}).then(function(){a.all(t.main.currentExchange).success(function(e){t.main.wishlist=e})}),r.loadExchange=function(e,n){t.main.currentExchange=e,t.main.currentExchangeName=n,a.all(t.main.currentExchange).success(function(e){t.main.wishlist=e})},r.showAddExchangeModal=function(){l.showModal({templateUrl:"app/views/pages/addExchangeModal.html",controller:"addExchangeModalController"}).then(function(e){e.element.modal(),e.close.then(function(e){e&&(r.exchanges=e.exchanges)})})},r.isActive=function(e){return e===n.path()},r.googleLogin=function(){e.location.href="/auth/google"},r.logOut=function(){e.location.href="/logout"}}]),angular.module("exchangeService",[]).factory("Exchange",["$http",function(e){var n={};return n.all=function(){return e.get("/api/exchange")},n.add=function(n){return e.post("/api/exchange",n)},n.get=function(n){return e.get("/api/exchange/"+n)},n.update=function(n,t){return e.put("/api/exchange/"+n,t)},n["delete"]=function(n){return e["delete"]("/api/exchange/"+n)},n}]),angular.module("wishlistService",[]).factory("Wishlist",["$http",function(e){var n={};return n.owner=function(){return e.get("/api/me")},n.all=function(n){return e.get("/api/"+n+"/wishlist")},n.add=function(n,t){return e.post("/api/"+n+"/wishlist",t)},n.update=function(n,t,a){return e.put("/api/"+n+"/wishlist/"+t,a)},n.remove=function(n,t){return e["delete"]("/api/"+n+"/wishlist/"+t)},n}]);